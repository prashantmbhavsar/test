<html>
<head>
<script type="text/javascript" src="js/underscore-1.6.js"> 
</script>
<script type="text/javascript" src="js/backbone-1.1.js"> 
</script>
<script type="text/javascript"> 


	Politician=Backbone.Model.extend({
		idAttribute: "_testing",
		id :'test again',
		defaults:{
			name:'Sarad',
			age:35,
			fraudCount:10,
			assets:'500 CR'
		},
		validate:function(props){
			console.log("In Politician validation!");
			if(props.age > 65){
				return 'age is not valid';
			}
		},
		initialize:function(){
			console.log("In Politician constructor!");
			//this.bind('change:fraudCount',this.doSomething);
			//this.bind('change:assets',this.doSomething);
			this.bind('change',function(model){ this.doSomething(model,'Ritesh Tyagi');});
			//this.bind('invalid',this.handleErrors);
		},
		handleErrors:function(props,msg){
			console.error('MSG:'+msg);
			//console.log('Age'+props.age);
		},
		display:function(){
			console.log('Name : '+this.get('name'));
			console.log('Age  : '+this.get('age'));
			console.log('Fraud Count: '+this.get('fraudCount'));
			console.log('Undeclared Assets: '+this.get('assets'));
		},
		doMore:function(){
			this.set('fraudCount',this.get('fraudCount')+1);
			console.log('One more fraud is in pocket!');
		},
		doSomething:function(model,user){
			//console.log('Current User : '+user);
			//console.log('Property value changed!');
			//console.log('New Value :'+model.get('fraudCount'));
			//console.log('New Value :'+model.get('assets'));
			//console.log('New Value :'+model.get('age'));
		}
		
	});

	
	var lalu=new Politician({name:'Lalu',age:56,fraudCount:70});
	lalu.set('age',90);
	//lalu.display();
	
	/*
	var returnValue = lalu.set({age:80},{validate:false});
	//console.log(returnValue);
	if(lalu.isValid()){
		console.log('True:'+lalu.validationError);
	}else{
		console.log('False:'+lalu.validationError);
	}
	lalu.display();
	*/
	
	
	//console.log(lalu.attributes);
	//console.log(lalu.changed);
	//console.log(lalu.sync);
	
	
	/*
	console.log(lalu.changedAttributes());
	lalu.set('age',0);
	
	console.log(lalu.previous("age"));
	console.log(lalu.previousAttributes());
	
	*/
	console.log(lalu.isNew());
	console.log(lalu.toJSON());
	console.log(lalu.unset('age'));
	lalu.set({name:'Prashant',age : 28});
	
	//console.log(lalu.toJSON());
	</script>
</head>
<body>
<h2>Model with property validation example</h2>
</body>
</html>
